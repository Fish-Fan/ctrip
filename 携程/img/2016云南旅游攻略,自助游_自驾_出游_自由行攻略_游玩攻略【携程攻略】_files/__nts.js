/*! 2016-6-1_17:33:40 zzhu@ctrip.com */
!function(){function e(){if(D=y.match(new RegExp("[/?&]c=([^&]+)")))return 0;for(var e,o,i=y.match(new RegExp("[/#&]c=([^&]+)")),n="",a="",c="",r="",s=0,u=d.length;u>s;){if(o=d[s].split("|"),p.indexOf(o[1])>-1){n=o[0],r=o[3];for(var l,w=0,g=o[2].split(";"),f=g.length;f>w;w++){if(l=h.match(new RegExp("[/?&]"+g[w]+"([^&]+)"))){c=l[1];break}break}}s++}return n||(n=t.test(p)?p.match(t)[2]:"")?(i&&i.length>1?n=y.indexOf("c=baidumap")>=0?"baidumap":i[1]:c="google"==n&&/gb2312/i.test(h)||"URLEncode"==r?"_URL."+c:"UTF-8"==r?"_UTF."+decodeURIComponent(c):"_UTF."+c,c=escape(c),e={si:n,ke:a,qu:c,ho:p,la:v},m.replace(/\{(\w+)\}/g,function(o,i){return e[i]})):0}function o(){if(!D)return 0;var e,o,i=D[1],n="",t="",a="";return i.indexOf("A")>-1&&(o=i.split("A"),n=o[0],t=o[1]),n?(t=1==t?"":t,t=escape(t),e={si:n,ke:t,qu:a,ho:p,la:v},m.replace(/\{(\w+)\}/g,function(o,i){return e[i]})):0}var i=/^\w+:\/\/([^\/]+)/,n=/\.ctrip\.com|\.sh\.ctriptravel\.com/,t=/^([\w-]+\.)?(.+)\.(in|com|net|org|info|biz|cc|tv|cn|gov\.cn|name|mobi)$/,a=/ctrip\.com\.hk|ctrip\.com\.cn|sh\.ctriptravel\.com/,c=/english\.|\.english\./,r="Session",s="720",m="SmartLinkCode={si}&SmartLinkKeyWord={ke}&SmartLinkQuary={qu}&SmartLinkHost={ho}&SmartLinkLanguage={la}",d=["google|google|q=|UTF-8","baidu|baidu|wd=;word=;kw=|URLEncode","yahoo|yahoo|p=|UTF-8","yahoo|yisou|search:|UTF-8","yahoo|3721|p=|URLEncode","sohu|sogou.com|query=|URLEncode","sohuwz|sohu.com|query=|URLEncode","sinawz|sina.com||","sina|iask.com|k=;_searchkey=;key=|URLEncode","163wz|126.com|q=|URLEncode","163wz|163.com|q=|URLEncode","163wz|188.com|q=|URLEncode","163wz|yeah.net|q=|URLEncode","163|163.com|q=|URLEncode","tom|tom.com|word=;w=|URLEncode","hao123|hao123.com||","265|265.com||","21cn|21cn.com|keyword=|URLEncode","qqwz|qq.com||","qq|soso.com|w=|URLEncode","online|online.sh||","9991|9991.com||","live|msn|q=|UTF-8","yodao|yodao|q=|UTF-8","lycos|lycos|query=|UTF-8","ask|.ask.com|q=|UTF-8","altavista|altavista|q=|UTF-8","search|search.com|q=|UTF-8","netscape|netscape|query=|UTF-8","zhongsou|zhongsou|w=;word=|URLEncode","alice|alice.it|qs=|","teoma|teoma|q=|UTF-8","earthlink|earthlink|q=|UTF-8","cnn|cnn|query=|","looksmart|looksmart|key=|UTF-8","about|about|terms=|","excite|excite|qkw=;q_all=|","mamma|mamma|query=|UTF-8","alltheweb|alltheweb|q=|UTF-8","gigablast|gigablast|q=|UTF-8","aol|aol|query=|UTF-8","shtz1104|www.travelzoo.com||","so.com|so.com||","qunar.com|qunar.com||","360cn|so.360.cn||"],u=["www.baidu.com|4897|130026","www.google.cn|4899|130678","www.google.com.hk|4899|130678","www.google.com.tw|4899|130678","www.soso.com|4900|130701","www.sogou.com|4901|130709","www.yahoo.cn|4903|130761","search.yahoo.com|4903|130761","www.youdao.com|4904|130788","so.360.cn|5376|130860","www.so.com|5376|130860","www.bing.com|4902|130727","cn.bing.com|4902|130727","www.lvping.com|5377|130999"],l=["360oneboxf|5376|130862","360brandz|5376|153507","baiduzd|4897|130033","baidumap|3052|108412"],w=["baidu.com|4897|135366","google|4899|135371","soso.com|4900|135374","sogou.com|4901|135376","bing.com|4902|135379","yahoo|4903|135383","so.com|5376|135390","2345.com|1119|439101"],g={config:[{reg:/map.baidu.com$/i,aid:108298,sid:793914,sourceID:55552551},{reg:/nuomi.com$/i,aid:108298,sid:793914,sourceID:55552551},{reg:/lvyou.baidu.com$/i,aid:108298,sid:793916,sourceID:55552551},{reg:/kuai.baidu.com$/i,aid:108298,sid:793917,sourceID:55552551},{reg:/c3c6.com$/i,aid:313278,sid:792638,sourceID:55552551},{reg:/hao568.com$/i,aid:313278,sid:792659,sourceID:55552551},{reg:/1213.org$/i,aid:313278,sid:792660,sourceID:55552551},{reg:/9223.com$/i,aid:313278,sid:792661,sourceID:55552551},{reg:/2345.in$/i,aid:313278,sid:792662,sourceID:55552551},{reg:/wzdq123.com$/i,aid:313278,sid:792667,sourceID:55552551},{reg:/ole99.cn$/i,aid:313278,sid:792669,sourceID:55552551},{reg:/114mo.com$/i,aid:313278,sid:792670,sourceID:55552551},{reg:/wang1314.com$/i,aid:313278,sid:792672,sourceID:55552551},{reg:/baimin.com$/i,aid:313278,sid:792673,sourceID:55552551},{reg:/haokan123.biz$/i,aid:313278,sid:792674,sourceID:55552551},{reg:/myubbs.com$/i,aid:313278,sid:792677,sourceID:55552551},{reg:/3145.com$/i,aid:313278,sid:792678,sourceID:55552551},{reg:/155.com$/i,aid:313278,sid:792679,sourceID:55552551}],set_cookie:function(e,o){for(var i=0;i<o.length;i++){var n=o[i].aid,t=o[i].sid,a=o[i].sourceID,c=e.match(o[i].reg);if(c){var r;r="Union=AllianceID="+n+"&SID="+t+"&SourceID="+a+"&OUID=;path=/;domain="+I.domain+";expires="+new Date((new Date).getTime()+6048e5).toGMTString(),document.cookie=r}}},init:function(e){this.set_cookie(e,this.config)}},h=document.referrer,p=h.match(i),f={getCookie:function(e){var o=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=o?unescape(o[2]):null}},k={sendRefferTraceLogFn:function(e){var o='{"type":"pc","union":"'+e+'","referrer":"'+document.referrer+'"}';window.__bfi.push(["_tracklog","mkt_seo_unionlog",o])},sendRefferTraceLog:function(){"undefined"==typeof window.__bfi&&(window.__bfi=[]);var e=f.getCookie("Union");this.sendRefferTraceLogFn(e)}};if(p&&!n.test(p=p[1])){var D,U=document.domain,v=c.test(U)?"en":"zh",y=location.href,I={},x=[];if((I[r]=e())||(I[r]=o())){var b=(location.search||"").match(new RegExp("[\\?&]isctrip=([^&]+)","i"));if("T"==(b?unescape(b[1]):null))return;I.expires=new Date((new Date).getTime()+36e5*s).toGMTString(),I.path="/",I.domain=U.match(a)||"ctrip.com";for(var S in I)x.push(S+"="+I[S]);var T=window.location.href.toLowerCase();if(T.indexOf("sid")>=0&&T.indexOf("allianceid")>=0);else if(g.init(p),h.indexOf("qq.com")>=0){var L;L="Session=smartlinkcode=U1535&smartlinklanguage=zh&SmartLinkKeyWord=&SmartLinkQuary=&SmartLinkHost=;path=/;domain="+I.domain+";expires="+I.expires,document.cookie=L,L="Union=AllianceID=1315&SID=1535&OUID=;path=/;domain="+I.domain+";expires="+new Date((new Date).getTime()+6048e5).toGMTString(),document.cookie=L}else if(h.indexOf("hao123.com")>=0){var L;L="Session=smartlinkcode=U1911&smartlinklanguage=zh&SmartLinkKeyWord=&SmartLinkQuary=&SmartLinkHost=;path=/;domain="+I.domain+";expires="+I.expires,document.cookie=L,L="Union=AllianceID=1630&SID=1911&OUID=;path=/;domain="+I.domain+";expires="+new Date((new Date).getTime()+6048e5).toGMTString(),document.cookie=L}else if(h.indexOf("123.sogou.com")>=0);else{(h.indexOf("www.baidu.com")>=0||h.indexOf("www.google.cn")>=0||h.indexOf("www.google.com.hk")>=0||h.indexOf("www.soso.com")>=0||h.indexOf("www.bing.com")>=0||h.indexOf("www.yahoo.cn")>=0||h.indexOf("www.sogou.com")>=0||h.indexOf("so.360.cn")>=0||h.indexOf("so.com")>=0)&&(document.cookie.indexOf("Union=")>=0||document.URL.indexOf("#c")>=0)&&(document.cookie="Union=;path=/;domain="+I.domain+";expires="+new Date((new Date).getTime()-864e5).toGMTString()),document.cookie=x.join("; ");var R,q,O,_,F;F=!1;for(var E=0;E<l.length;E++)if(_=l[E].split("|"),R=_[0],q=_[1],O=_[2],y.indexOf("#c="+R)>=0){var L;L="Session=smartlinkcode=U"+O+"&smartlinklanguage=zh&SmartLinkKeyWord=&SmartLinkQuary=&SmartLinkHost=;path=/;domain="+I.domain+";expires="+I.expires,document.cookie=L,L="Union=AllianceID="+q+"&SID="+O+"&OUID=;path=/;domain="+I.domain+";expires="+new Date((new Date).getTime()+6048e5).toGMTString(),document.cookie=L,F=!0;break}if(!F)for(var E=0;E<u.length;E++)if(_=u[E].split("|"),R=_[0],q=_[1],O=_[2],h.indexOf(R)>=0){var L;L="Session=smartlinkcode=U"+O+"&smartlinklanguage=zh&SmartLinkKeyWord=&SmartLinkQuary=&SmartLinkHost=;path=/;domain="+I.domain+";expires="+I.expires,document.cookie=L,L="Union=AllianceID="+q+"&SID="+O+"&OUID=;path=/;domain="+I.domain+";expires="+new Date((new Date).getTime()+6048e5).toGMTString(),document.cookie=L,F=!0;break}if(!F)for(var E=0;E<w.length;E++)if(_=w[E].split("|"),R=_[0],q=_[1],O=_[2],h.indexOf(R)>=0){var L;L="Session=smartlinkcode=U"+O+"&smartlinklanguage=zh&SmartLinkKeyWord=&SmartLinkQuary=&SmartLinkHost=;path=/;domain="+I.domain+";expires="+I.expires,document.cookie=L,L="Union=AllianceID="+q+"&SID="+O+"&OUID=;path=/;domain="+I.domain+";expires="+new Date((new Date).getTime()+6048e5).toGMTString(),document.cookie=L,F=!0;break}}k.sendRefferTraceLog();for(var M=["src%5Fname","src%5Fkeyword","src%5FQuary","src%5Fhost"],z=0,C=M.length;C>z;z++)document.cookie=M[z]+"=; domain="+I.domain+"; path=/; expires="+new Date(0).toGMTString()}}}(),function(){function e(e){var i=o.match(new RegExp("[\\?&]"+e+"=([^&]+)","i"));return i?unescape(i[1]):null}try{var o=location.search||""}catch(i){var o=document.URL.match(/\?[^#]+/)||""}for(var n,t=[],a=["campaign","adid"],c=0;c<a.length;c++)n=e(a[c]),n&&t.push(a[c]+"="+escape(n));if(t.length){var r=document.domain.match(/ctrip\.com\.hk|ctrip\.com\.cn|sh\.ctriptravel\.com/)||"ctrip.com";document.cookie="traceExt="+t.join("&")+"; domain="+r+"; path=/; expires="+new Date((new Date).getTime()+26784e5).toGMTString()}}(),function(){for(var e=document.getElementsByTagName("script")||[],o=/_bfa\.min\.js/i,i=0;i<e.length;i++)if(o.test(e[i].src))return;try{var n=document.location.href}catch(t){var n=document.URL}if(!(window.$_bf||window.$LAB||window.CtripJsLoader)&&/^https?:\/\/[^\/]*\bpages\b/i.test(n)){var a=new Date,c="?v="+a.getFullYear()+a.getMonth()+"_"+a.getDate()+".js",r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0;try{var s="https:"==document.location.protocol}catch(t){var s="https:"==n.match(/[^:]+/)+":"}r.src=s?"https://s.c-ctrip.com/_bfa.min.js"+c:"http://webresource.c-ctrip.com/code/ubt/_bfa.min.js"+c;var m=document.getElementsByTagName("script")[0];m.parentNode.insertBefore(r,m)}}(),function(){function e(e){var o=window.screen.width,i=window.screen.height,n="menubar=yes,titlebar=yes,toolbar=yes,location=yes,directories=yes,status=yes,resizable=yes,scrollbars=yes";n+=",width="+o,n+=",height="+i;var t=window.open(e,"newwindow",n);t&&t.blur()}function o(){var e=location.search,o=new Object;if(-1!=e.indexOf("?"))for(var i=e.substr(1).toLocaleLowerCase(),n=i.split("&"),t=0;t<n.length;t++)o[n[t].split("=")[0]]=unescape(n[t].split("=")[1]);return o}var i=window.location.host;if("hotels.ctrip.com"==i||"hotels.testp.sh.ctriptravel.com"==i||"hotels.uat.sh.ctriptravel.com"==i||"flights.ctrip.com"==i||"flights.testp.sh.ctriptravel.com"==i||"flights.uat.sh.ctriptravel.com"==i){var n=o(),t=n.allianceid,a=n.sid,c=window.location.toString().toLocaleLowerCase();if("3052"==t&&"86710"==a||"5376"==t&&"176275"==a||"3052"==t&&"133134"==a||c.indexOf("#c=360oneboxf")>=0){var r="http://www.ctrip.com/home/page_360.asp";document.all&&e(r)}}}(),function(){var e={getQuery:function(e){var o=location.href.match(new RegExp("[?&]"+e+"=([^&#]+)","i"));return null==o||o.length<1?"":o[1]}},o={multiunionUrlRule:[/http[s]*\:\/\/pages\.ctrip\.com/,/http[s]*\:\/\/events\.ctrip\.com/,/http[s]*\:\/\/contents\.ctrip\.com/,/http[s]*\:\/\/flights\.ctrip\.com\/campaign/]},i={setCooki:function(e,o,i){var n=i||7,t=new Date,a=/^(\w[^#]+)/;t.setTime(t.getTime()+24*n*60*60*1e3),o.AllianceID=o.AllianceID.match(a)?o.AllianceID.match(a)[0]:o.AllianceID,o.SID=o.SID.match(a)?o.SID.match(a)[0]:o.SID;var c="OUID="+o.OUID+"&AllianceID="+o.AllianceID+"&SID="+o.SID+"&SourceID="+o.SourceID;document.cookie=e+"="+c+";path=/;expires="+t.toUTCString()+";domain="+window.location.hostname.split(".").slice(-2).join(".")||"ctrip.com"},getCooki:function(e){var o=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=o?unescape(o[2]):null},isMultiunionUrl:function(e,o){var i=!1;for(var n in o){var t=o[n]instanceof RegExp?"reg":null;if("reg"==t&&o[n].test(e)){i=!0;break}}return i},setMultiunion:function(){var o=e.getQuery("allianceid")||"",i=e.getQuery("sid")||e.getQuery("ctripsid")||"",n=e.getQuery("ouid")||e.getQuery("actouid")||"",t=e.getQuery("sourceid")||"";(o&&i||t)&&(UNION={AllianceID:o&&i?o:"",SID:o&&i?i:"",OUID:o&&i?n:"",SourceID:t},this.setCooki("Union",UNION,7))},setCookieForC_Ctrip:function(){var e=this,o={Union:e.getCooki("Union"),MKtUnionTM:function(){var e=7,o=864e5*e,i=(new Date).getTime()+o;return i}()},i=window.location,n="https:"==i.protocol;try{_XHR=new XMLHttpRequest}catch(t){_XHR=new ActiveXObject("Msxml2.XMLHTTP")}_XHR.open("POST",i.protocol+"//m.ctrip.com/webapp/mkt/pages-cookie/writecookie",!0),_XHR.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),_XHR.withCredentials=!0,_XHR.send("Union="+encodeURIComponent(o.Union)+"&MKtUnionTM="+encodeURIComponent(o.MKtUnionTM)+"&isSec="+n),_XHR.onreadystatechange=function(){4===_XHR.readyState&&200===_XHR.status}},init:function(){var i=window.location.href;e.getQuery("multiunionsupport")&&(this.isMultiunionUrl(i,o.multiunionUrlRule)?this.setMultiunion():/http[s]*\:\/\/pages.c-ctrip.com/i.test(i)&&(this.setMultiunion(),this.setCookieForC_Ctrip()))}};i.init()}();